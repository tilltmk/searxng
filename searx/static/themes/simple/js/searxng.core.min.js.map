{"version":3,"mappings":"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","names":["assertElement: AssertElement","endpoint: EndpointsKeys","settings: Settings","saveTimeout: number"],"ignoreList":[],"sources":["../../../../../client/simple/src/js/core/toolkit.ts","../../../../../client/simple/src/js/core/nojs.ts","../../../../../client/simple/src/js/core/router.ts","../../../../../client/simple/src/js/core/listener.ts","../../../../../client/simple/src/js/ai-enhancer.ts","../../../../../client/simple/src/js/ai-integration.ts"],"sourcesContent":["// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport type { KeyBindingLayout } from \"../main/keyboard.ts\";\n\n// synced with searx/webapp.py get_client_settings\ntype Settings = {\n  advanced_search?: boolean;\n  autocomplete?: string;\n  autocomplete_min?: number;\n  doi_resolver?: string;\n  favicon_resolver?: string;\n  hotkeys?: KeyBindingLayout;\n  infinite_scroll?: boolean;\n  method?: \"GET\" | \"POST\";\n  query_in_title?: boolean;\n  results_on_new_tab?: boolean;\n  safesearch?: 0 | 1 | 2;\n  search_on_category_select?: boolean;\n  theme?: string;\n  theme_static_path?: string;\n  translations?: Record<string, string>;\n  url_formatting?: \"pretty\" | \"full\" | \"host\";\n};\n\ntype HTTPOptions = {\n  body?: BodyInit;\n  timeout?: number;\n};\n\ntype ReadyOptions = {\n  // all values must be truthy for the callback to be executed\n  on?: (boolean | undefined)[];\n};\n\ntype AssertElement = (element?: HTMLElement | null) => asserts element is HTMLElement;\n\nexport type EndpointsKeys = keyof typeof Endpoints;\n\nexport const Endpoints = {\n  index: \"index\",\n  results: \"results\",\n  preferences: \"preferences\",\n  unknown: \"unknown\"\n} as const;\n\nexport const mutable = {\n  closeDetail: undefined as (() => void) | undefined,\n  scrollPageToSelected: undefined as (() => void) | undefined,\n  selectImage: undefined as ((resultElement: HTMLElement) => void) | undefined,\n  selectNext: undefined as ((openDetailView?: boolean) => void) | undefined,\n  selectPrevious: undefined as ((openDetailView?: boolean) => void) | undefined\n};\n\nconst getEndpoint = (): EndpointsKeys => {\n  const metaEndpoint = document.querySelector('meta[name=\"endpoint\"]')?.getAttribute(\"content\");\n\n  if (metaEndpoint && metaEndpoint in Endpoints) {\n    return metaEndpoint as EndpointsKeys;\n  }\n\n  return Endpoints.unknown;\n};\n\nconst getSettings = (): Settings => {\n  const settings = document.querySelector(\"script[client_settings]\")?.getAttribute(\"client_settings\");\n  if (!settings) return {};\n\n  try {\n    return JSON.parse(atob(settings));\n  } catch (error) {\n    console.error(\"Failed to load client_settings:\", error);\n    return {};\n  }\n};\n\nexport const assertElement: AssertElement = (element?: HTMLElement | null): asserts element is HTMLElement => {\n  if (!element) {\n    throw new Error(\"Bad assertion: DOM element not found\");\n  }\n};\n\nexport const http = async (method: string, url: string | URL, options?: HTTPOptions): Promise<Response> => {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), options?.timeout ?? 30_000);\n\n  const res = await fetch(url, {\n    body: options?.body,\n    method: method,\n    signal: controller.signal\n  }).finally(() => clearTimeout(timeoutId));\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  return res;\n};\n\nexport const listen = <K extends keyof DocumentEventMap, E extends HTMLElement>(\n  type: string | K,\n  target: string | Document | E,\n  listener: (this: E, event: DocumentEventMap[K]) => void | Promise<void>,\n  options?: AddEventListenerOptions\n): void => {\n  if (typeof target !== \"string\") {\n    target.addEventListener(type, listener as EventListener, options);\n    return;\n  }\n\n  document.addEventListener(\n    type,\n    (event: Event) => {\n      for (const node of event.composedPath()) {\n        if (node instanceof HTMLElement && node.matches(target)) {\n          try {\n            listener.call(node as E, event as DocumentEventMap[K]);\n          } catch (error) {\n            console.error(error);\n          }\n          break;\n        }\n      }\n    },\n    options\n  );\n};\n\nexport const ready = (callback: () => void, options?: ReadyOptions): void => {\n  for (const condition of options?.on ?? []) {\n    if (!condition) {\n      return;\n    }\n  }\n\n  if (document.readyState !== \"loading\") {\n    callback();\n  } else {\n    listen(\"DOMContentLoaded\", document, callback, { once: true });\n  }\n};\n\nexport const endpoint: EndpointsKeys = getEndpoint();\nexport const settings: Settings = getSettings();\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { ready } from \"./toolkit.ts\";\n\nready(() => {\n  document.documentElement.classList.remove(\"no-js\");\n  document.documentElement.classList.add(\"js\");\n});\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { Endpoints, endpoint, ready, settings } from \"./toolkit.ts\";\n\nready(\n  () => {\n    void import(\"../main/keyboard.ts\");\n    void import(\"../main/search.ts\");\n\n    if (settings.autocomplete) {\n      void import(\"../main/autocomplete.ts\");\n    }\n  },\n  { on: [endpoint === Endpoints.index] }\n);\n\nready(\n  () => {\n    void import(\"../main/keyboard.ts\");\n    void import(\"../main/mapresult.ts\");\n    void import(\"../main/results.ts\");\n    void import(\"../main/search.ts\");\n\n    if (settings.infinite_scroll) {\n      void import(\"../main/infinite_scroll.ts\");\n    }\n\n    if (settings.autocomplete) {\n      void import(\"../main/autocomplete.ts\");\n    }\n  },\n  { on: [endpoint === Endpoints.results] }\n);\n\nready(\n  () => {\n    void import(\"../main/preferences.ts\");\n  },\n  { on: [endpoint === Endpoints.preferences] }\n);\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { listen } from \"./toolkit.ts\";\n\nlisten(\"click\", \".close\", function (this: HTMLElement) {\n  (this.parentNode as HTMLElement)?.classList.add(\"invisible\");\n});\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n\n/**\n * AI Enhancer Frontend\n *\n * Handles display of AI-enhanced features:\n * - Relevance scores\n * - Result summaries\n * - Interactive blob-wave cursor follower\n */\n\ninterface BlobWavePosition {\n  x: number;\n  y: number;\n}\n\nclass AIEnhancer {\n  private interactiveBlob: HTMLElement | null = null;\n  private currentPosition: BlobWavePosition = { x: 0, y: 0 };\n  private targetPosition: BlobWavePosition = { x: 0, y: 0 };\n\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.enhanceResults();\n    this.createInteractiveBlob();\n    this.setupEventListeners();\n  }\n\n  /**\n   * Enhance search results with AI features\n   */\n  enhanceResults() {\n    const results = document.querySelectorAll('article.result');\n\n    results.forEach((result) => {\n      const resultData = this.getResultData(result as HTMLElement);\n\n      if (resultData.aiScore) {\n        this.addRelevanceScore(result as HTMLElement, resultData.aiScore);\n      }\n\n      if (resultData.aiSummary) {\n        this.addSummary(result as HTMLElement, resultData.aiSummary);\n      }\n    });\n  }\n\n  /**\n   * Extract AI data from result element\n   */\n  getResultData(result: HTMLElement): { aiScore?: string; aiSummary?: string } {\n    // In a real implementation, this would parse data attributes\n    // For now, we'll look for data attributes that the backend might add\n    return {\n      aiScore: result.dataset.aiScore,\n      aiSummary: result.dataset.aiSummary,\n    };\n  }\n\n  /**\n   * Add relevance score badge to result\n   */\n  addRelevanceScore(result: HTMLElement, score: string) {\n    const scoreElement = document.createElement('div');\n    scoreElement.className = `ai-relevance-score`;\n    scoreElement.setAttribute('data-score', score);\n\n    const indicator = document.createElement('span');\n    indicator.className = 'score-indicator';\n\n    const label = document.createElement('span');\n    label.textContent = `${score.charAt(0).toUpperCase() + score.slice(1)} Relevance`;\n\n    scoreElement.appendChild(indicator);\n    scoreElement.appendChild(label);\n\n    // Insert at the beginning of the result\n    const firstChild = result.querySelector('h3, .result-title');\n    if (firstChild) {\n      firstChild.parentNode?.insertBefore(scoreElement, firstChild);\n    }\n  }\n\n  /**\n   * Add AI summary to result\n   */\n  addSummary(result: HTMLElement, summary: string) {\n    const summaryElement = document.createElement('div');\n    summaryElement.className = 'ai-summary';\n\n    const label = document.createElement('div');\n    label.className = 'ai-summary-label';\n    label.textContent = 'AI Summary';\n\n    const text = document.createElement('div');\n    text.className = 'ai-summary-text';\n    text.textContent = summary;\n\n    summaryElement.appendChild(label);\n    summaryElement.appendChild(text);\n\n    // Insert after content\n    const content = result.querySelector('.content');\n    if (content) {\n      content.parentNode?.insertBefore(summaryElement, content.nextSibling);\n    }\n  }\n\n  /**\n   * Create interactive blob that follows cursor\n   */\n  createInteractiveBlob() {\n    // Only on desktop\n    if (window.innerWidth < 768) {\n      return;\n    }\n\n    const blob = document.createElement('div');\n    blob.className = 'blob-wave-interactive';\n    document.body.appendChild(blob);\n\n    this.interactiveBlob = blob;\n\n    // Start animation loop\n    this.animateBlob();\n  }\n\n  /**\n   * Setup event listeners\n   */\n  setupEventListeners() {\n    if (!this.interactiveBlob) return;\n\n    // Track cursor movement\n    document.addEventListener('mousemove', (e) => {\n      this.targetPosition = {\n        x: e.clientX,\n        y: e.clientY,\n      };\n    });\n\n    // Hide blob when cursor leaves window\n    document.addEventListener('mouseleave', () => {\n      if (this.interactiveBlob) {\n        this.interactiveBlob.style.opacity = '0';\n      }\n    });\n\n    document.addEventListener('mouseenter', () => {\n      if (this.interactiveBlob) {\n        this.interactiveBlob.style.opacity = '0.2';\n      }\n    });\n  }\n\n  /**\n   * Animate interactive blob with smooth following\n   */\n  animateBlob() {\n    if (!this.interactiveBlob) return;\n\n    // Smooth easing\n    const ease = 0.15;\n\n    this.currentPosition.x += (this.targetPosition.x - this.currentPosition.x) * ease;\n    this.currentPosition.y += (this.targetPosition.y - this.currentPosition.y) * ease;\n\n    // Update position (centered on cursor)\n    this.interactiveBlob.style.transform = `translate(${this.currentPosition.x - 150}px, ${this.currentPosition.y - 150}px)`;\n\n    // Continue animation\n    requestAnimationFrame(() => this.animateBlob());\n  }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    new AIEnhancer();\n  });\n} else {\n  new AIEnhancer();\n}\n\nexport { AIEnhancer };\n","/**\n * Premium AI Integration - Apple-Style with Spinning Gradient Border\n * Handles provider selection, API key management, and AI features\n */\n\ninterface AIConfig {\n  provider: 'ollama' | 'anthropic' | 'openai' | 'none';\n  apiKey: string;\n  enableScoring: boolean;\n  enableSummaries: boolean;\n}\n\nclass PremiumAIIntegration {\n  private config: AIConfig;\n  private localStorageKey = 'searxng_ai_config';\n\n  constructor() {\n    // Load saved config from localStorage\n    this.config = this.loadConfig();\n    this.init();\n  }\n\n  /**\n   * Initialize AI Integration\n   */\n  private init() {\n    console.log('ðŸ¤– Premium AI Integration initialized');\n\n    // Setup provider buttons\n    this.setupProviderButtons();\n\n    // Setup API key input\n    this.setupApiKeyInput();\n\n    // Setup feature toggles\n    this.setupFeatureToggles();\n\n    // Apply saved config to UI\n    this.applyConfigToUI();\n\n    // Update status\n    this.updateStatus();\n  }\n\n  /**\n   * Load config from localStorage\n   */\n  private loadConfig(): AIConfig {\n    try {\n      const saved = localStorage.getItem(this.localStorageKey);\n      if (saved) {\n        return JSON.parse(saved);\n      }\n    } catch (e) {\n      console.warn('Failed to load AI config:', e);\n    }\n\n    // Default config\n    return {\n      provider: 'none',\n      apiKey: '',\n      enableScoring: true,\n      enableSummaries: true\n    };\n  }\n\n  /**\n   * Save config to localStorage\n   */\n  private saveConfig() {\n    try {\n      localStorage.setItem(this.localStorageKey, JSON.stringify(this.config));\n      console.log('ðŸ’¾ AI config saved', this.config);\n    } catch (e) {\n      console.error('Failed to save AI config:', e);\n    }\n  }\n\n  /**\n   * Setup provider selection buttons\n   */\n  private setupProviderButtons() {\n    const providerBtns = document.querySelectorAll<HTMLElement>('.provider-btn');\n\n    providerBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        const provider = btn.getAttribute('data-provider') as AIConfig['provider'];\n\n        // Remove active class from all buttons\n        providerBtns.forEach(b => b.classList.remove('active'));\n\n        // Add active class to clicked button\n        btn.classList.add('active');\n\n        // Update config\n        this.config.provider = provider;\n        this.saveConfig();\n        this.updateStatus();\n\n        // Animate button\n        btn.style.transform = 'scale(0.95)';\n        setTimeout(() => {\n          btn.style.transform = '';\n        }, 100);\n\n        console.log(`âœ¨ AI Provider changed to: ${provider}`);\n      });\n    });\n  }\n\n  /**\n   * Setup API key input\n   */\n  private setupApiKeyInput() {\n    const input = document.getElementById('ai-api-key-input') as HTMLInputElement;\n    if (!input) return;\n\n    // Debounced save\n    let saveTimeout: number;\n    input.addEventListener('input', () => {\n      clearTimeout(saveTimeout);\n      saveTimeout = window.setTimeout(() => {\n        this.config.apiKey = input.value;\n        this.saveConfig();\n        this.updateStatus();\n        console.log('ðŸ”‘ API key updated');\n      }, 500);\n    });\n\n    // Load saved key\n    if (this.config.apiKey) {\n      input.value = this.config.apiKey;\n    }\n  }\n\n  /**\n   * Setup feature toggle switches\n   */\n  private setupFeatureToggles() {\n    // Scoring toggle\n    this.setupToggle('ai-scoring', (checked) => {\n      this.config.enableScoring = checked;\n      this.saveConfig();\n      console.log(`â­ Result scoring: ${checked ? 'enabled' : 'disabled'}`);\n    });\n\n    // Summaries toggle\n    this.setupToggle('ai-summaries', (checked) => {\n      this.config.enableSummaries = checked;\n      this.saveConfig();\n      console.log(`ðŸ“ Smart summaries: ${checked ? 'enabled' : 'disabled'}`);\n    });\n  }\n\n  /**\n   * Setup individual toggle\n   */\n  private setupToggle(id: string, onChange: (checked: boolean) => void) {\n    const checkbox = document.getElementById(id) as HTMLInputElement;\n    if (!checkbox) return;\n\n    const toggle = checkbox.parentElement?.querySelector('.feature-toggle');\n    if (!toggle) return;\n\n    toggle.addEventListener('click', (e) => {\n      // Prevent double-triggering\n      if ((e.target as HTMLElement).tagName === 'INPUT') return;\n\n      checkbox.checked = !checkbox.checked;\n      onChange(checkbox.checked);\n\n      // Animate toggle\n      const toggleSwitch = toggle.querySelector('.toggle-switch');\n      if (toggleSwitch) {\n        (toggleSwitch as HTMLElement).style.transform = 'scale(0.95)';\n        setTimeout(() => {\n          (toggleSwitch as HTMLElement).style.transform = '';\n        }, 100);\n      }\n    });\n\n    checkbox.addEventListener('change', () => {\n      onChange(checkbox.checked);\n    });\n  }\n\n  /**\n   * Apply saved config to UI\n   */\n  private applyConfigToUI() {\n    // Set active provider button\n    if (this.config.provider !== 'none') {\n      const btn = document.querySelector(`[data-provider=\"${this.config.provider}\"]`);\n      if (btn) {\n        btn.classList.add('active');\n      }\n    }\n\n    // Set API key\n    const input = document.getElementById('ai-api-key-input') as HTMLInputElement;\n    if (input && this.config.apiKey) {\n      input.value = this.config.apiKey;\n    }\n\n    // Set toggles\n    const scoringCheckbox = document.getElementById('ai-scoring') as HTMLInputElement;\n    if (scoringCheckbox) {\n      scoringCheckbox.checked = this.config.enableScoring;\n    }\n\n    const summariesCheckbox = document.getElementById('ai-summaries') as HTMLInputElement;\n    if (summariesCheckbox) {\n      summariesCheckbox.checked = this.config.enableSummaries;\n    }\n  }\n\n  /**\n   * Update AI status indicator\n   */\n  private updateStatus() {\n    const statusText = document.querySelector('.ai-status .status-text');\n    const statusDot = document.querySelector('.ai-status .status-dot') as HTMLElement;\n    const status = document.querySelector('.ai-status') as HTMLElement;\n\n    if (!statusText || !statusDot || !status) return;\n\n    const isConfigured = this.config.provider !== 'none' && this.config.apiKey.length > 0;\n\n    if (isConfigured) {\n      statusText.textContent = `${this.getProviderName()} Connected`;\n      statusDot.style.background = '#30d158';\n      statusDot.style.boxShadow = '0 0 12px rgba(48, 209, 88, 0.6)';\n      status.style.background = 'linear-gradient(135deg, rgba(48, 209, 88, 0.1), rgba(48, 209, 88, 0.05))';\n      status.style.borderColor = 'rgba(48, 209, 88, 0.3)';\n      status.style.color = '#30d158';\n    } else {\n      statusText.textContent = 'Not Configured';\n      statusDot.style.background = '#ff9f0a';\n      statusDot.style.boxShadow = '0 0 12px rgba(255, 159, 10, 0.6)';\n      status.style.background = 'linear-gradient(135deg, rgba(255, 159, 10, 0.1), rgba(255, 159, 10, 0.05))';\n      status.style.borderColor = 'rgba(255, 159, 10, 0.3)';\n      status.style.color = '#ff9f0a';\n    }\n  }\n\n  /**\n   * Get provider display name\n   */\n  private getProviderName(): string {\n    switch (this.config.provider) {\n      case 'ollama':\n        return 'Ollama';\n      case 'anthropic':\n        return 'Anthropic';\n      case 'openai':\n        return 'OpenAI';\n      default:\n        return 'AI';\n    }\n  }\n\n  /**\n   * Add AI indicator to result\n   */\n  static addIndicatorToResult(result: HTMLElement, score: string, summary?: string) {\n    const indicator = document.createElement('span');\n    indicator.className = 'result-ai-indicator';\n    indicator.setAttribute('data-score', score);\n\n    const icon = document.createElement('span');\n    icon.className = 'ai-icon';\n    icon.textContent = score === 'high' ? 'â­' : score === 'medium' ? 'âœ¨' : 'ðŸ’¡';\n\n    const text = document.createElement('span');\n    text.textContent = score === 'high' ? 'Highly Relevant' : score === 'medium' ? 'Related' : 'Info';\n\n    indicator.appendChild(icon);\n    indicator.appendChild(text);\n\n    const title = result.querySelector('h3');\n    if (title) {\n      title.appendChild(indicator);\n    }\n\n    // Add summary if provided\n    if (summary) {\n      const summaryEl = document.createElement('div');\n      summaryEl.className = 'ai-summary-inline';\n      summaryEl.textContent = summary;\n\n      const content = result.querySelector('.content');\n      if (content) {\n        content.parentNode?.insertBefore(summaryEl, content.nextSibling);\n      }\n    }\n  }\n\n  /**\n   * Get current config (for external use)\n   */\n  getConfig(): AIConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Check if AI is configured and enabled\n   */\n  isEnabled(): boolean {\n    return this.config.provider !== 'none' && this.config.apiKey.length > 0;\n  }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    new PremiumAIIntegration();\n  });\n} else {\n  new PremiumAIIntegration();\n}\n\n// Export for use in other modules\nexport { PremiumAIIntegration };\n"],"file":"searxng.core.min.js"}