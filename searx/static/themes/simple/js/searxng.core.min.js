import{t as e}from"./defineProperty.min.js";const t={index:`index`,results:`results`,preferences:`preferences`,unknown:`unknown`},n={closeDetail:void 0,scrollPageToSelected:void 0,selectImage:void 0,selectNext:void 0,selectPrevious:void 0};var r=()=>{let e=document.querySelector(`meta[name="endpoint"]`)?.getAttribute(`content`);return e&&e in t?e:t.unknown},i=()=>{let e=document.querySelector(`script[client_settings]`)?.getAttribute(`client_settings`);if(!e)return{};try{return JSON.parse(atob(e))}catch(e){return console.error(`Failed to load client_settings:`,e),{}}};const a=e=>{if(!e)throw Error(`Bad assertion: DOM element not found`)},o=async(e,t,n)=>{let r=new AbortController,i=setTimeout(()=>r.abort(),n?.timeout??3e4),a=await fetch(t,{body:n?.body,method:e,signal:r.signal}).finally(()=>clearTimeout(i));if(!a.ok)throw Error(a.statusText);return a},s=(e,t,n,r)=>{if(typeof t!=`string`){t.addEventListener(e,n,r);return}document.addEventListener(e,e=>{for(let r of e.composedPath())if(r instanceof HTMLElement&&r.matches(t)){try{n.call(r,e)}catch(e){console.error(e)}break}},r)},c=(e,t)=>{for(let e of t?.on??[])if(!e)return;document.readyState===`loading`?s(`DOMContentLoaded`,document,e,{once:!0}):e()},l=r(),u=i();c(()=>{document.documentElement.classList.remove(`no-js`),document.documentElement.classList.add(`js`)});var d=`modulepreload`,f=function(e){return`/static/themes/simple/`+e},p={};const m=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=f(t,n),t in p)return;p[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:d,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};c(()=>{m(()=>import(`./keyboard.min.js`),[]),m(()=>import(`./search.min.js`),[]),u.autocomplete&&m(()=>import(`./autocomplete.min.js`),[])},{on:[l===t.index]}),c(()=>{m(()=>import(`./keyboard.min.js`),[]),m(()=>import(`./mapresult.min.js`),[]),m(()=>import(`./results.min.js`),[]),m(()=>import(`./search.min.js`),[]),u.infinite_scroll&&m(()=>import(`./infinite_scroll.min.js`),[]),u.autocomplete&&m(()=>import(`./autocomplete.min.js`),[])},{on:[l===t.results]}),c(()=>{m(()=>import(`./preferences.min.js`),[])},{on:[l===t.preferences]}),s(`click`,`.close`,function(){this.parentNode?.classList.add(`invisible`)});var h=class{constructor(){e(this,`interactiveBlob`,null),e(this,`currentPosition`,{x:0,y:0}),e(this,`targetPosition`,{x:0,y:0}),this.init()}init(){this.enhanceResults(),this.createInteractiveBlob(),this.setupEventListeners()}enhanceResults(){document.querySelectorAll(`article.result`).forEach(e=>{let t=this.getResultData(e);t.aiScore&&this.addRelevanceScore(e,t.aiScore),t.aiSummary&&this.addSummary(e,t.aiSummary)})}getResultData(e){return{aiScore:e.dataset.aiScore,aiSummary:e.dataset.aiSummary}}addRelevanceScore(e,t){let n=document.createElement(`div`);n.className=`ai-relevance-score`,n.setAttribute(`data-score`,t);let r=document.createElement(`span`);r.className=`score-indicator`;let i=document.createElement(`span`);i.textContent=`${t.charAt(0).toUpperCase()+t.slice(1)} Relevance`,n.appendChild(r),n.appendChild(i);let a=e.querySelector(`h3, .result-title`);a&&a.parentNode?.insertBefore(n,a)}addSummary(e,t){let n=document.createElement(`div`);n.className=`ai-summary`;let r=document.createElement(`div`);r.className=`ai-summary-label`,r.textContent=`AI Summary`;let i=document.createElement(`div`);i.className=`ai-summary-text`,i.textContent=t,n.appendChild(r),n.appendChild(i);let a=e.querySelector(`.content`);a&&a.parentNode?.insertBefore(n,a.nextSibling)}createInteractiveBlob(){if(window.innerWidth<768)return;let e=document.createElement(`div`);e.className=`blob-wave-interactive`,document.body.appendChild(e),this.interactiveBlob=e,this.animateBlob()}setupEventListeners(){this.interactiveBlob&&(document.addEventListener(`mousemove`,e=>{this.targetPosition={x:e.clientX,y:e.clientY}}),document.addEventListener(`mouseleave`,()=>{this.interactiveBlob&&(this.interactiveBlob.style.opacity=`0`)}),document.addEventListener(`mouseenter`,()=>{this.interactiveBlob&&(this.interactiveBlob.style.opacity=`0.2`)}))}animateBlob(){if(!this.interactiveBlob)return;let e=.15;this.currentPosition.x+=(this.targetPosition.x-this.currentPosition.x)*e,this.currentPosition.y+=(this.targetPosition.y-this.currentPosition.y)*e,this.interactiveBlob.style.transform=`translate(${this.currentPosition.x-150}px, ${this.currentPosition.y-150}px)`,requestAnimationFrame(()=>this.animateBlob())}};document.readyState===`loading`?document.addEventListener(`DOMContentLoaded`,()=>{new h}):new h;var g=class{constructor(){e(this,`config`,void 0),e(this,`localStorageKey`,`searxng_ai_config`),this.config=this.loadConfig(),this.init()}init(){console.log(`ðŸ¤– Premium AI Integration initialized`),this.setupProviderButtons(),this.setupApiKeyInput(),this.setupFeatureToggles(),this.applyConfigToUI(),this.updateStatus()}loadConfig(){try{let e=localStorage.getItem(this.localStorageKey);if(e)return JSON.parse(e)}catch(e){console.warn(`Failed to load AI config:`,e)}return{provider:`none`,apiKey:``,enableScoring:!0,enableSummaries:!0}}saveConfig(){try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.config)),console.log(`ðŸ’¾ AI config saved`,this.config)}catch(e){console.error(`Failed to save AI config:`,e)}}setupProviderButtons(){let e=document.querySelectorAll(`.provider-card`);e.forEach(t=>{t.addEventListener(`click`,()=>{let n=t.getAttribute(`data-provider`);e.forEach(e=>e.classList.remove(`active`)),t.classList.add(`active`),this.config.provider=n,this.saveConfig(),this.updateStatus(),t.style.transform=`scale(0.98)`,setTimeout(()=>{t.style.transform=``},100),console.log(`âœ¨ AI Provider changed to: ${n}`)})})}setupApiKeyInput(){let e=document.getElementById(`ai-api-key-input`);if(!e)return;let t;e.addEventListener(`input`,()=>{clearTimeout(t),t=window.setTimeout(()=>{this.config.apiKey=e.value,this.saveConfig(),this.updateStatus(),console.log(`ðŸ”‘ API key updated`)},500)}),this.config.apiKey&&(e.value=this.config.apiKey)}setupFeatureToggles(){this.setupToggle(`ai-scoring`,e=>{this.config.enableScoring=e,this.saveConfig(),console.log(`â­ Result scoring: ${e?`enabled`:`disabled`}`)}),this.setupToggle(`ai-summaries`,e=>{this.config.enableSummaries=e,this.saveConfig(),console.log(`ðŸ“ Smart summaries: ${e?`enabled`:`disabled`}`)})}setupToggle(e,t){let n=document.getElementById(e);if(!n)return;let r=n.closest(`.feature-item`);r&&n.addEventListener(`change`,()=>{t(n.checked);let e=r.querySelector(`.toggle-switch`);e&&(e.style.transform=`scale(0.95)`,setTimeout(()=>{e.style.transform=``},100))})}applyConfigToUI(){if(this.config.provider!==`none`){let e=document.querySelector(`.provider-card[data-provider="${this.config.provider}"]`);e&&e.classList.add(`active`)}let e=document.getElementById(`ai-api-key-input`);e&&this.config.apiKey&&(e.value=this.config.apiKey);let t=document.getElementById(`ai-scoring`);t&&(t.checked=this.config.enableScoring);let n=document.getElementById(`ai-summaries`);n&&(n.checked=this.config.enableSummaries)}updateStatus(){let e=document.querySelector(`.ai-status-bar .status-text`),t=document.querySelector(`.ai-status-bar .status-indicator`),n=document.querySelector(`.ai-status-bar .status-details`);!e||!t||!n||(this.config.provider!==`none`&&this.config.apiKey.length>0?(e.textContent=`${this.getProviderName()} Connected`,n.textContent=`AI features active`,t.style.background=`linear-gradient(135deg, #30d158, #28a745)`,t.style.boxShadow=`0 0 16px rgba(48, 209, 88, 0.6), 0 0 4px rgba(48, 209, 88, 0.8)`,e.style.color=`#30d158`):(e.textContent=`Not Configured`,n.textContent=`Configure provider to enable`,t.style.background=`linear-gradient(135deg, #ff9f0a, #ff8c00)`,t.style.boxShadow=`0 0 16px rgba(255, 159, 10, 0.6), 0 0 4px rgba(255, 159, 10, 0.8)`,e.style.color=`#ff9f0a`))}getProviderName(){switch(this.config.provider){case`ollama`:return`Ollama`;case`anthropic`:return`Anthropic`;case`openai`:return`OpenAI`;default:return`AI`}}static addIndicatorToResult(e,t,n){let r=document.createElement(`span`);r.className=`result-ai-indicator`,r.setAttribute(`data-score`,t);let i=document.createElement(`span`);i.className=`ai-icon`,i.textContent=t===`high`?`â­`:t===`medium`?`âœ¨`:`ðŸ’¡`;let a=document.createElement(`span`);a.textContent=t===`high`?`Highly Relevant`:t===`medium`?`Related`:`Info`,r.appendChild(i),r.appendChild(a);let o=e.querySelector(`h3`);if(o&&o.appendChild(r),n){let t=document.createElement(`div`);t.className=`ai-summary-inline`,t.textContent=n;let r=e.querySelector(`.content`);r&&r.parentNode?.insertBefore(t,r.nextSibling)}}getConfig(){return{...this.config}}isEnabled(){return this.config.provider!==`none`&&this.config.apiKey.length>0}};document.readyState===`loading`?document.addEventListener(`DOMContentLoaded`,()=>{new g}):new g;export{n as a,s as i,a as n,u as o,o as r,m as t};
//# sourceMappingURL=searxng.core.min.js.map